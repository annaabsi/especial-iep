<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1" />
    <meta name="theme-color" content="#FFF" />
    <link rel="canonical" href="https://data.larepublica.pe/encuesta-iep-aprobacion-desaprobacion-peru-presidente-congreso-de-la-republica" />
    <meta name="robots" content="index,follow" />
    <meta name="googlebot" content="index, follow" />
    <meta name="description" content="De acuerdo con la encuesta IEP, la ciudadanía percibe una elevada corrupción generalizada en las instituciones públicas. El Congreso lidera esa lista con un 88%, luego le siguen los municipios y Gobiernos Regionales. #EncuestaIEP"
    />
    <meta property="og:url" content="https://data.larepublica.pe/encuesta-iep-aprobacion-desaprobacion-peru-presidente-congreso-de-la-republica" />
    <meta property="og:title" content="Encuesta IEP: para el 88%, el Congreso es percibido como la institución con mayor corrupción generalizada" />
    <meta property="og:image" content="https://cdn.glitch.me/09ad6912-77fe-457b-af64-54b232bf7e67/ss.jpg" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <meta property="fb:pages" content="94604237016" />
    <meta property="fb:app_id" content="489210501129201" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@larepublica_pe" />
    <meta name="twitter:title" content=" Encuesta IEP: para el 88%, el Congreso es percibido como la institución con mayor corrupción generalizada" />
    <meta name="twitter:description" content="De acuerdo con la encuesta IEP, la ciudadanía percibe una elevada corrupción generalizada en las instituciones públicas. El Congreso lidera esa lista con un 88%, luego le siguen los municipios y Gobiernos Regionales. #EncuestaIEP"
    />
    <meta name="twitter:image" content="https://cdn.glitch.me/09ad6912-77fe-457b-af64-54b232bf7e67/ss.jpg" />
    <meta name="distribution" content="global" />
    <meta name="rating" content="general" />
    <meta name="lang" content="es_PE" />
    <meta name="author" content="Redacción LR" />
    <meta name="keywords" content="Encuesta, Castillo, congreso, Maria del Carmen Alva, IEP, Mayo 2022, política" />
    <title>
        Encuesta IEP: para el 88%, el Congreso es percibido como la institución con mayor corrupción generalizada
    </title>
    <link rel="icon" type="image/png" sizes="32x32" href="https://cdn.larepublica.pe/favicon-32x32.png" />
    <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/billboard.js/2.1.4/billboard.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/billboard.js/2.1.4/billboard.min.css" />
    <link rel="stylesheet" href="https://naver.github.io/billboard.js/release/latest/dist/theme/graph.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.min.js"></script>
    <script src="https://api.mapbox.com/mapbox-gl-js/v1.11.1/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v1.11.1/mapbox-gl.css" rel="stylesheet" />
    <!-- Import the webpage's stylesheet -->
    <!-- <link rel="stylesheet" href="/style.css" /> -->

    <style>
        @import url("https://fonts.googleapis.com/css2?family=Mukta:wght@300&family=Newsreader:wght@500&display=swap");
        body {
            background: #f1f1f0;
            font-family: "Mukta", serif;
        }
        
        h1 {
            font-family: "Newsreader", sans-serif;
            font-size: 2.5rem;
            text-align: center;
            margin-top: 2rem;
        }
        
        .mt-x {
            margin-top: 5rem;
        }
        
        header {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            z-index: 2;
            transition: all 0.5s ease;
            padding: 15px 42px;
            background: lightgrey;
            border-bottom: 4px solid #fe0404;
        }
        
        header span {
            font-size: 0;
        }
        
        header img {
            width: 140px;
        }
        
        span [class*="btn-"] {
            display: inline-block;
            width: 30px;
            height: 30px;
            margin-left: 10px;
        }
        
        span a.btn-fb {
            margin-left: 0;
        }
        
        span a.btn-fb,
        span a.btn-twt,
        span a.btn-wsp {
            background-image: url(https://files.larepublica.pe/Larepublica/2020/11/09/iconos-redes-sociales-blanco-1604962294.svg);
            background-position: 0 0;
            background-repeat: no-repeat;
            background-size: 30px;
        }
        
        span a.btn-twt {
            background-position: 0 -40px;
            background-repeat: no-repeat;
        }
        
        span a.btn-wsp {
            background-position: 0 -80px;
            background-repeat: no-repeat;
        }
        
        .menu__left {
            display: inline-block;
            vertical-align: middle;
            width: calc(100% - 38px);
            /*width: 160px;*/
        }
        
        .menu__right {
            display: none;
            /*display: inline-block;*/
            text-align: right;
            vertical-align: middle;
            width: calc(100% - 198px);
        }
        
        .container__menu {
            font-size: 0;
        }
        
        h2 {
            margin-bottom: 21px;
            margin-top: 35px;
            font-size: 1.8rem;
            font-family: "Newsreader", sans-serif;
        }
        
        a {
            color: #000;
            text-decoration: underline;
        }
        
        a:hover {
            color: #000;
            text-decoration: none;
        }
        
        #map,
        #aprobacion_congreso,
        #aprobacion_castillo,
        #aprobacion_nse,
        #perspectiva_1_castillo {
            width: 100%;
            max-width: 700px;
            margin: auto;
            min-height: 450px;
        }
        
        #aprueba_desaprueba,
        #select_macrozonas {
            text-align: center;
            display: block;
            margin: auto;
        }
        
        .special_box {
            text-align: center;
            display: block;
            margin: auto;
        }
        
        .special_box p {
            font-size: 13px;
        }
        
        #despues_vacancia,
        #razones_castillo,
        #corrupto_castillo,
        #aprobacion_congreso,
        #aprobacion_mca,
        #ministro_salud {
            min-height: 400px;
        }
        
        #defensa_castillo,
        #aprobacion_anibal {
            min-height: 300px;
        }
        
        text.bb-chart-arcs-gauge-title,
        .bb-chart-arcs .bb-chart-arcs-title {
            font-size: 13px !important;
            fill: #8c8c8c;
            font-style: italic;
        }
        
        #despues_vacancia .bb-tooltip-container {
            max-width: 200px;
        }
        
        #aprobacion_castillo .bb-axis-x .tick text {
            font-size: 11px;
            transform: translate(0px, -4px);
        }
        
        #aprobacion_castillo .bb-legend-item,
        #razones_castillo .bb-legend-item,
        #aprobacion_congreso .bb-legend-item,
        #aprobacion_mca .bb-legend-item,
        #corrupcion_generalizada .bb-legend-item {
            transform: translate(0px, 6px) !important;
        }
        
        #vacancia_castillo .bb-axis-x .tick text {
            font-size: 11px;
            transform: translate(0px, -4px);
        }
        
        #vacancia_castillo .bb-legend-item {
            transform: translate(0px, 6px) !important;
        }
        
        #corrupto_castillo .bb-axis-x .tick text {
            font-size: 11px;
            transform: translate(0px, -4px);
        }
        
        #corrupto_castillo .bb-legend-item {
            transform: translate(0px, 6px) !important;
        }
        
        #aprobacion_ambito .bb-axis-x .tick text {
            font-size: 11px;
            transform: translate(0px, -4px);
        }
        
        #aprobacion_ambito .bb-legend-item {
            transform: translate(0px, 6px) !important;
        }
        
        #map {
            min-height: 500px;
        }
        
        #aprobacion_nse .bb-axis-y text {
            fill: #555;
        }
        
        #aprobacion_ambito .bb-axis-y text {
            fill: #555;
        }
        
        #week_a_week {
            display: block;
        }
        
        .mapboxgl-popup-content {
            min-width: 120px;
            padding: 7px 7px 4px 7px;
            text-align: center;
            font-family: "Mukta", serif;
        }
        
        .mapboxgl-popup-content .provincia {
            margin: 7px 7px 0px 7px;
        }
        
        .mapboxgl-popup-content .totales {
            margin: 1px 7px 0px 7px;
        }
        
        .bb-line {
            stroke-width: 2px;
        }
        
        #aprobacion_ambito path.bb-bar,
        #aprobacion_ambito_vacancia path.bb-bar {
            opacity: 0.6 !important;
        }
        
        .macro_zona {
            margin-bottom: 0;
        }
        
        footer {
            padding: 42px;
            font-family: sans-serif;
        }
        
        footer span {
            display: block;
            text-align: center;
            color: #545b6a;
            font-size: 14px;
            line-height: 1.5;
        }
        
        .w-1000 {
            width: 100%;
            max-width: 1000px;
            margin: 0 auto;
        }
        
        dl {
            display: flex;
            background-color: white;
            flex-direction: column;
            width: 100%;
            max-width: 700px;
            position: relative;
            padding: 20px;
        }
        
        dt {
            align-self: flex-start;
            width: 100%;
            font-weight: 700;
            display: block;
            text-align: center;
            font-size: 1.2em;
            font-weight: 700;
            margin-bottom: 20px;
            margin-left: 130px;
        }
        
        .text {
            font-weight: 600;
            display: flex;
            align-items: center;
            /* height: 40px; */
            width: 100px;
            /*         background-color: white; */
            position: absolute;
            left: 10px;
            justify-content: flex-start;
            line-height: 21px;
        }
        
        .percentage {
            font-size: 0.8em;
            line-height: 1;
            text-transform: uppercase;
            width: 70%;
            height: 20px;
            margin-left: 102px;
            background: repeating-linear-gradient( to right, #ddd, #ddd 1px, #fff 1px, #fff 5%);
        }
        
        .percentage:after {
            content: "";
            display: block;
            background-color: #e76c5d;
            opacity: 1;
            /*         width: 50px; */
            margin-bottom: 10px;
            height: 90%;
            position: relative;
            top: 50%;
            transform: translateY(-50%);
            transition: background-color 0.3s ease;
            cursor: pointer;
        }
        
        .historico {
            padding: 0;
            text-align: center;
            margin: auto;
        }
        
        .historico a {
            text-decoration: none;
        }
        
        .historico span {
            margin-right: 14px;
        }
        
        .percentage:hover:after,
        .percentage:focus:after {
            background-color: #aaa;
        }
        
        .percentage-1:after {
            width: 1%;
        }
        
        .percentage-2:after {
            width: 2%;
        }
        
        .percentage-3:after {
            width: 3%;
        }
        
        .percentage-4:after {
            width: 4%;
        }
        
        .percentage-5:after {
            width: 5%;
        }
        
        .percentage-6:after {
            width: 6%;
        }
        
        .percentage-7:after {
            width: 7%;
        }
        
        .percentage-8:after {
            width: 8%;
        }
        
        .percentage-9:after {
            width: 9%;
        }
        
        .percentage-10:after {
            width: 10%;
        }
        
        .percentage-11:after {
            width: 11%;
        }
        
        .percentage-12:after {
            width: 12%;
        }
        
        .percentage-13:after {
            width: 13%;
        }
        
        .percentage-14:after {
            width: 14%;
        }
        
        .percentage-15:after {
            width: 15%;
        }
        
        .percentage-16:after {
            width: 16%;
        }
        
        .percentage-17:after {
            width: 17%;
        }
        
        .percentage-18:after {
            width: 18%;
        }
        
        .percentage-19:after {
            width: 19%;
        }
        
        .percentage-20:after {
            width: 20%;
        }
        
        .percentage-21:after {
            width: 21%;
        }
        
        .percentage-22:after {
            width: 22%;
        }
        
        .percentage-23:after {
            width: 23%;
        }
        
        .percentage-24:after {
            width: 24%;
        }
        
        .percentage-25:after {
            width: 25%;
        }
        
        .percentage-26:after {
            width: 26%;
        }
        
        .percentage-27:after {
            width: 27%;
        }
        
        .percentage-28:after {
            width: 28%;
        }
        
        .percentage-29:after {
            width: 29%;
        }
        
        .percentage-30:after {
            width: 30%;
        }
        
        .percentage-31:after {
            width: 31%;
        }
        
        .percentage-32:after {
            width: 32%;
        }
        
        .percentage-33:after {
            width: 33%;
        }
        
        .percentage-34:after {
            width: 34%;
        }
        
        .percentage-35:after {
            width: 35%;
        }
        
        .percentage-36:after {
            width: 36%;
        }
        
        .percentage-37:after {
            width: 37%;
        }
        
        .percentage-38:after {
            width: 38%;
        }
        
        .percentage-39:after {
            width: 39%;
        }
        
        .percentage-40:after {
            width: 40%;
        }
        
        .percentage-41:after {
            width: 41%;
        }
        
        .percentage-42:after {
            width: 42%;
        }
        
        .percentage-43:after {
            width: 43%;
        }
        
        .percentage-44:after {
            width: 44%;
        }
        
        .percentage-45:after {
            width: 45%;
        }
        
        .percentage-46:after {
            width: 46%;
        }
        
        .percentage-47:after {
            width: 47%;
        }
        
        .percentage-48:after {
            width: 48%;
        }
        
        .percentage-49:after {
            width: 49%;
        }
        
        .percentage-50:after {
            width: 50%;
        }
        
        .percentage-51:after {
            width: 51%;
        }
        
        .percentage-52:after {
            width: 52%;
        }
        
        .percentage-53:after {
            width: 53%;
        }
        
        .percentage-54:after {
            width: 54%;
        }
        
        .percentage-55:after {
            width: 55%;
        }
        
        .percentage-56:after {
            width: 56%;
        }
        
        .percentage-57:after {
            width: 57%;
        }
        
        .percentage-58:after {
            width: 58%;
        }
        
        .percentage-59:after {
            width: 59%;
        }
        
        .percentage-60:after {
            width: 60%;
        }
        
        .percentage-61:after {
            width: 61%;
        }
        
        .percentage-62:after {
            width: 62%;
        }
        
        .percentage-63:after {
            width: 63%;
        }
        
        .percentage-64:after {
            width: 64%;
        }
        
        .percentage-65:after {
            width: 65%;
        }
        
        .percentage-66:after {
            width: 66%;
        }
        
        .percentage-67:after {
            width: 67%;
        }
        
        .percentage-68:after {
            width: 68%;
        }
        
        .percentage-69:after {
            width: 69%;
        }
        
        .percentage-70:after {
            width: 70%;
        }
        
        .percentage-71:after {
            width: 71%;
        }
        
        .percentage-72:after {
            width: 72%;
        }
        
        .percentage-73:after {
            width: 73%;
        }
        
        .percentage-74:after {
            width: 74%;
        }
        
        .percentage-75:after {
            width: 75%;
        }
        
        .percentage-76:after {
            width: 76%;
        }
        
        .percentage-77:after {
            width: 77%;
        }
        
        .percentage-78:after {
            width: 78%;
        }
        
        .percentage-79:after {
            width: 79%;
        }
        
        .percentage-80:after {
            width: 80%;
        }
        
        .percentage-81:after {
            width: 81%;
        }
        
        .percentage-82:after {
            width: 82%;
        }
        
        .percentage-83:after {
            width: 83%;
        }
        
        .percentage-84:after {
            width: 84%;
        }
        
        .percentage-85:after {
            width: 85%;
        }
        
        .percentage-86:after {
            width: 86%;
        }
        
        .percentage-87:after {
            width: 87%;
        }
        
        .percentage-88:after {
            width: 88%;
        }
        
        .percentage-89:after {
            width: 89%;
        }
        
        .percentage-90:after {
            width: 90%;
        }
        
        .percentage-91:after {
            width: 91%;
        }
        
        .percentage-92:after {
            width: 92%;
        }
        
        .percentage-93:after {
            width: 93%;
        }
        
        .percentage-94:after {
            width: 94%;
        }
        
        .percentage-95:after {
            width: 95%;
        }
        
        .percentage-96:after {
            width: 96%;
        }
        
        .percentage-97:after {
            width: 97%;
        }
        
        .percentage-98:after {
            width: 98%;
        }
        
        .percentage-99:after {
            width: 99%;
        }
        
        .percentage-100:after {
            width: 100%;
        }
        
        .separador {
            display: block;
            margin: auto;
            max-width: 60px;
            padding-top: 42px;
        }
        
        .durara p,
        .no_durara p {}
        /*       .durara{
                    max-width: 80%;
                  } */
        
        .horizontal-bar {
            max-width: 400px;
            margin: auto;
        }
        
        #desagregado_button {
            text-align: center;
            display: block;
            margin: auto;
            max-width: 100px;
            text-decoration: none;
        }
        
        #desagregado_1,
        #desagregado_2 {
            padding-top: 42px;
        }
        
        .horizontal-bar p {
            text-align: center;
            margin-bottom: 0;
            margin-top: 30px;
            font-weight: 600;
            font-size: 14px;
            margin-left: 49px;
        }
        
        .helicopter {
            border: none;
            margin-bottom: 14px;
        }
        
        .preferencia {
            text-align: center;
        }
        
        .resultados {
            margin: 7px 0 21px 7px;
            font-size: 2rem;
            font-weight: 700;
        }
        
        .number_1,
        .number_2 {
            display: inline-block;
        }
        
        .preferencia img {
            width: 130px;
            height: 130px;
            display: block;
            margin: auto;
        }
        
        .question {
            font-size: 14px;
            font-weight: 700;
            text-align: center;
            margin: 35px auto 21px auto;
        }
        
        .mt-21 {
            margin-top: 21px;
        }
        
        .iframe_yt {
            max-width: 700px;
            margin: 42px auto 21px auto;
            display: block;
        }
        
        .ficha_tecnica {
            font-size: 13px;
            color: #555;
        }
        
        .btn-outline-danger {
            color: #de425b;
            border-color: #de425b;
        }
        
        .btn-outline-danger:hover {
            color: #fff;
            background-color: #de425b;
            border-color: #de425b;
        }
        
        #corrupcion_generalizada .bb-legend {
            display: none;
        }
        
        @media (min-width: 768px) {
            #corrupcion_generalizada .bb-legend {
                display: block;
            }
            h1 {
                font-size: 3rem;
            }
            p {
                font-size: 18px;
            }
            h2 {
                font-size: 2rem;
            }
            .historico {
                padding: 14px 7px;
            }
            .text {
                left: 180px;
                width: 130px;
            }
            header img {
                width: 160px;
            }
            span [class*="btn-"] {
                display: inline-block;
                width: 40px;
                height: 40px;
                margin-left: 10px;
            }
            span a.btn-fb,
            span a.btn-twt,
            span a.btn-wsp {
                background-size: cover;
                background-color: #fff;
                border-radius: 50%;
            }
            span a.btn-twt {
                background-position: 0 -40px;
                background-repeat: no-repeat;
            }
            span a.btn-wsp {
                background-position: 0 -80px;
                background-repeat: no-repeat;
            }
            .menu__button {
                display: none;
            }
            .menu__left {
                width: 300px;
            }
            .menu__right {
                display: inline-block;
                width: calc(100% - 300px);
            }
            .content__menu-mobile {
                display: none;
            }
            .items__menu {
                display: block;
            }
            .percentage {
                width: 100%;
                margin-left: 110px;
            }
            .helicopter {
                border-bottom: none;
                border-right: 1px solid #8c8c8c;
                margin-bottom: 0px;
            }
            .intertitulado {
                border-bottom: 1px solid #8c8c8c;
                line-height: 35px;
            }
        }
        
        @media (min-width: 993px) {
            .percentage {
                width: 100%;
                margin-left: 21px;
            }
        }
        
        @media (max-width: 767px) {
            header {
                padding: 7px 20px;
            }
            footer {
                padding: 27.9px 30px;
            }
        }
        
        .flourish-chart {
            max-width: 400px;
            margin: auto;
        }
        
        .flourish-credit {
            display: none;
        }
    </style>
</head>

<body>
    <header id="w-header">
        <div class="container__menu">
            <!-- <div class="menu__button">                <div class="menu"> <button id="menuMobile"> <span></span> <span></span> <span></span> </button> </div>            </div> -->
            <div class="menu__left">
                <a href="https://data.larepublica.pe/" rel="noopener" style="display: inline-block" target="_blank">
                    <picture>
                        <source id="w-sourceLogoDesktop" media="(min-width: 768px)" srcset="
                  https://larepublica.cronosmedia.glr.pe/data/2121/10/05/logo.png
                " />
                        <img id="w-sourceLogoMobile" src="https://larepublica.cronosmedia.glr.pe/data/2121/10/05/logo.png" />
                    </picture>
                </a>
            </div>
            <div class="menu__right">
                <span class="items_shared">
            <a
              class="btn-fb btn-Social"
              data-social="facebook"
              href="https://www.facebook.com/sharer/sharer.php?u=https://data.larepublica.pe/encuesta-iep-aprobacion-desaprobacion-peru-presidente-congreso-de-la-republica"
              id="id-btn-fb"
              rel="noopener"
            >
            </a>
            <a
              class="btn-twt btn-Social"
              data-social="twitter"
              href="https://twitter.com/share?url=https://data.larepublica.pe/encuesta-iep-aprobacion-desaprobacion-peru-presidente-congreso-de-la-republica&via=LRData"
              id="id-btn-twt"
              rel="noopener"
            >
            </a>
            <a
              class="btn-wsp"
              href="https://api.whatsapp.com/send?text=https://data.larepublica.pe/encuesta-iep-aprobacion-desaprobacion-peru-presidente-congreso-de-la-republica"
              id="id-btn-wsp"
              rel="noopener"
              target="_blank"
            >
            </a>
          </span>
            </div>
        </div>
    </header>
    <div class="container mt-x">
        <div class="row">
            <div class="col">
                <h1 class="font-weight-bold">
                    Encuesta IEP: para el 88%, el Congreso es percibido como la institución con mayor corrupción generalizada
                </h1>
                <p>
                    De acuerdo con la encuesta IEP, la ciudadanía percibe una elevada corrupción generalizada en las instituciones públicas. El Congreso lidera esa lista con un 88%, luego le siguen los municipios y Gobiernos Regionales. En ese contexto, la aprobación del
                    presidente Pedro Castillo continúa en descenso, con un reducido 19%. Por su parte, la desaprobación hacia el Congreso sigue con valores similares al mes anterior, con un 75%.
                </p>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <h2 class="font-weight-bold">
                    Congreso, municipios y Gobiernos Regionales con elevada percepción de corrupción
                </h2>
                <p>
                    La reciente encuesta IEP de junio muestra un alto nivel de percepción de corrupción generalizada en tres instituciones públicas. Un 88% observa un mayor índice de corrupción en el Congreso, seguido por los municipios (86%) y los Gobiernos Regionales (86%).
                </p>
                <p class="question">
                    ¿Qué tan generalizada está la corrupción en … ?
                </p>
                <!-- <div class="special_box">
            <p>
              <b>El congreso</b>
            </p>
            <p>
              <b>Las municipalidades</b>
            </p>
            <p>
              <b>Los gobiernos regionales</b>
            </p>
            <p>
              <b>Las empresas privadas</b>
            </p>
            <p><b>El poder ejecutivo</b></p>
            <p><b>El entorno del Presidente Castillo</b></p>
          </div> -->
                <div id="corrupcion_generalizada"></div>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <h2 class="font-weight-bold">
                    Instituciones con mayor percepción de corrupción por macrozonas
                </h2>
                <p>
                    En Lima Metropolitana, la percepción de corrupción generalizada se acentúa en el Congreso y las municipalidades en un 90%. Una situación similar ocurre en el centro del país, cuyos ciudadanos consideran que la corrupción está generalizada en los Gobiernos
                    Regionales con un 91%. En esta zona del Perú, los gobernadores regionales están presuntamente vinculados a organizaciones criminales.
                </p>
                <p class="question">
                    ¿Qué tan generalizada está la corrupción en … ? (división por macrozonas)
                </p>
                <!-- <select id="aprueba_desaprueba"> -->
                <select id="select_macrozonas">
            <option>Lima Metropolitana</option>
            <option>Norte</option>
            <option>Centro</option>
            <option>Sur</option>
            <option>Oriente</option>
          </select>
                <!-- <div id="aprobacion_nse"></div> -->
                <div id="instituciones_macrozonas"></div>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <h2 class="font-weight-bold">
                    Sectores económicos en general perciben mayor corrupción en instituciones públicas
                </h2>
                <p>
                    Los sectores A y B registran una alta percepción de corrupción en el Congreso (95%), las municipalidades (92%) y los Gobiernos Regionales (94%). Del mismo modo, es observado el Ejecutivo y el entorno del presidente Castillo, con un 90%. Una situación
                    similar ocurre con el nivel C.
                </p>
                <p class="question">
                    ¿qué tan generalizada está la corrupción en … ? (Mucho/algo %)
                </p>
                <!-- <select id="select_instituciones">
            <option>El congreso</option>
            <option>Las municipalidades</option>
            <option>Los gobiernos regionales</option>
            <option>Las empresas privadas</option>
            <option>El poder ejecutivo</option>
            <option>El entorno del presidente</option>
          </select> -->
                <div id="instituciones_corrupcion"></div>
            </div>
        </div>
        <div class="row">
            <div class="col">
                <h2 class="font-weight-bold">
                    Desaprobación de Pedro Castillo sigue en aumento
                </h2>
                <p>
                    La desaprobación del presidente Pedro Castillo registra un 71%, una cifra que no ha podido modificar desde noviembre de 2021, en el que comenzó a superar el 60%. El rechazo continúa en aumento mes a mes.
                </p>
                <p class="question">
                    ¿Usted aprueba o desaprueba la forma como Pedro Castillo está conduciendo su gobierno?
                </p>
                <a href="#desagregado_1" type="button" class="btn btn-success btn-sm" id="desagregado_button">Ver detalle.</a
          >
          <div id="aprobacion_castillo"></div>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <h2 class="font-weight-bold">
            Percepción negativa sobre honestidad del mandatario
          </h2>
          <p>
            Con respecto a la imagen del presidente, un 66% de la población
            presenta una percepción negativa sobre su honestidad. Una cifra que
            se incrementa en 23 puntos porcentuales con respecto al mes
            anterior.
          </p>
          <p class="question">
            ¿Diría usted que el Presidente Pedro Castillo…? - Es honesto
          </p>
          <!-- <div id="asamblea_constituyente"></div> -->
          <div id="perspectiva_1_castillo"></div>
          <h2 class="font-weight-bold">
            Castillo: se incrementa percepción de menor preocupación por los que
            menos tienen
          </h2>
          <p>
            En esa línea, un 69% de ciudadanos y ciudadanas considera que el
            mandatario se preocupa poco o nada por los que menos tienen. El
            número continúa elevándose desde agosto de 2021.
          </p>
          <p class="question">
            ¿Diría usted que el Presidente Pedro Castillo…? - Se preocupa por
            los que menos tienen
          </p>
          <!-- <div id="asamblea_constituyente"></div> -->
          <div id="perspectiva_2_castillo"></div>
          <h2 class="font-weight-bold">
            Disminuye confianza hacia Pedro Castillo
          </h2>
          <p>
            La imagen del mandatario continúa viéndose afectada por los
            problemas que rodean su entorno. Es así que el porcentaje de
            confianza hacia al presidente sigue en descenso. Un 73% considera
            que el jefe de Estado no le inspira confianza.
          </p>
          <p class="question">
            ¿Diría usted que el Presidente Pedro Castillo…? - Le inspira
            confianza
          </p>
          <!-- <div id="asamblea_constituyente"></div> -->
          <div id="perspectiva_3_castillo"></div>
          <h2 class="font-weight-bold">
            Castillo: la mayoría no se siente representada por el mandatario
          </h2>
          <p>
            En tanto, un 69% de la ciudadanía se siente poco o nada representada
            por el presidente Pedro Castillo, cuya cifra sigue elevándose desde
            septiembre de 2021.
          </p>
          <p class="question">
            ¿Diría usted que el Presidente Pedro Castillo…? - Representa a gente
            como usted
          </p>
          <!-- <div id="asamblea_constituyente"></div> -->
          <div id="perspectiva_4_castillo"></div>
          <h2 class="font-weight-bold">
            Disminuye percepción sobre la capacidad de Castillo para gobernar
          </h2>
          <p>
            Existe un descenso continúo acerca de quienes consideran que el
            presidente Pedro Castillo tiene capacidad para gobernar. Solo un 25%
            lo cree.
          </p>
          <p class="question">
            ¿Diría usted que el Presidente Pedro Castillo…? - Tiene capacidad
            para gobernar
          </p>
          <!-- <div id="asamblea_constituyente"></div> -->
          <div id="perspectiva_5_castillo"></div>
        </div>
      </div>
      <!-- <div class="row">
        <div class="col">
          <h2 class="font-weight-bold">
            Opinión sobre posibles cambios de la Constitución
          </h2>
          <p>
            En relación con los cambios más convenientes del contenido, el 49%
            considera que se deberían hacer algunas modificaciones a la
            Constitución de 1993. Un 31% piensa que debe cambiarse a una nueva y
            un 17% opina que debe quedarse tal y como está.
          </p>
          <p class="question">
            Con relación a la actual Constitución de 1993, ¿qué cree usted que
            es más conveniente para el país?
          </p>
          <div class="special_box">
            <p>
              <b>Opción 1</b>: Hacer algunos cambios a la actual Constitución.
            </p>
            <p><b>Opción 2</b>: Cambiar a una nueva Constitución.</p>
            <p><b>Opción 3</b>: No se debe cambiar nada.</p>
            <p><b>Opción 4</b>: NS/NP</p>
          </div>
          <div id="cambio_constitucion"></div>
        </div>
      </div> -->
      <!-- <div class="row">
        <div class="col">
          <h2 class="font-weight-bold">
            ¿Cuántas personas han leído la actual Constitución?
          </h2>
          <p>
            Sin embargo, sobre su contenido, el 57% declara haber leído la
            Constitución. De ese grupo, un 53% ha leído algunos artículos y tan
            solo un 4% afirma haberla leído totalmente, mientras que un 42% no
            ha leído ni fragmentos.
          </p>
          <p class="question">
            Hablando de la actual Constitución, ¿usted diría que…?
          </p>
          <div id="leer_constitucion"></div>
        </div>
      </div> -->
      <!-- <div class="row">
        <div class="col">
          <h2 class="font-weight-bold">
            Conocimiento de la Constitución y pedido de cambios
          </h2>
          <p>
            Al comparar el conocimiento de las personas sobre la actual
            Constitución con su cambio, la encuesta IEP evidencia que tanto la s
            personas que la han leído como las que no, consideran que es
            necesario hacer algunos cambios a la Carta Magna. No obstante, en el
            grupo de quienes no la han leído, un 36% pide cambiar hacia una
            nueva.
          </p>
          <p class="question">
            Hablando de la actual Constitución, ¿usted diría que…?
          </p>
          <div class="special_box">
            <p>
              <b>Opción 1</b>: Hacer algunos cambios a la actual Constitución.
            </p>
            <p><b>Opción 2</b>: Cambiar a una nueva Constitución</p>
            <p><b>Opción 3</b>: No se debe cambiar nada</p>
            <p><b>Opción 4</b>: NS/NP</p>
          </div>
          <div id="reforma_constitucion"></div>
        </div>
      </div> -->
      <!-- <div class="row">
        <div class="col">
          <h2 class="font-weight-bold">Corrupción percibida en el gobierno</h2>
          <p>
            Sobre la corrupción percibida en el Gobierno, un 40% cree que es
            igual de corrupto que los anteriores. Pero, en comparación con la
            encuesta de marzo, la percepción de que el mandato de Castillo será
            aún más corrupto aumenta. Pasa de un 21% en marzo de 2022 a un 32%
            para mayo.
          </p>
          <p class="question">
            En comparacion con gobiernos anteriores, ¿el gobierno de Castillo
            terminara siendo...?
          </p>
          <div id="corrupto_castillo"></div>
        </div>
      </div> -->
      <div class="row">
        <div class="col">
          <h2 class="font-weight-bold">
            Desaprobación del Congreso sigue alta
          </h2>
          <p>
            Sin embargo, el Congreso también mantiene una elevada desaprobación.
            Un 85% de los encuestados rechaza el desempeño del Parlamento. En
            tanto, apenas un 12% lo aprueba.
          </p>
          <p class="question">
            ¿Usted aprueba o desaprueba el desempeño del Congreso de la
            República?
          </p>
          <div id="aprobacion_congreso"></div>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <h2 class="font-weight-bold">
            Desaprobación de Maricarmen Alva se mantiene
          </h2>
          <p>
            En junio de 2022, la desaprobación de la presidenta del Congreso,
            Maricarmen Alva, se mantuvo alta, con un 75%. En tanto, su
            aprobación alcanza solo el 18%.
          </p>
          <p class="question">
            ¿Usted aprueba o desaprueba el desempeño de la presidenta del
            Congreso, María del Carmen Alva?
          </p>
          <div id="aprobacion_mca"></div>
        </div>
      </div>
      <!-- <div class="row">
        <div class="col">
          <h2 class="font-weight-bold">
            Desaprobación del presidente del Consejo de Ministros
          </h2>
          <p>
            En tanto, las cifras del rechazo hacia las acciones que ejecuta
            Aníbal Torres, presidente del Consejo de Ministros, van en aumento.
            Un 70% desaprueba su desempeño dentro del Ejecutivo, mientras que el
            21% está a favor de su gestión en la PCM.
          </p>
          <p class="question">
            ¿Está de acuerdo o en desacuerdo con la designación de Aníbal Torres
            como presidente del Consejo de Ministros?
          </p>
          <div id="aprobacion_anibal"></div>
        </div>
      </div> -->
    </div>
    <!-- <div class="container">
      <div id="durara_o_no" class="row">
        <div class="col-sm">
          <div class="durara">
            <div class="horizontal-bar">
              <p>Durará 5 años como presidente</p>
              <dd class="percentage percentage-31">
                <span class="text">Noviembre: 31%</span>
              </dd>
              <dd class="percentage percentage-33">
                <span class="text">Diciembre: 33%</span>
              </dd>
              <dd class="percentage percentage-22">
                <span class="text">Diciembre: 22%</span>
              </dd>
            </div>
          </div>
          <div class="no_durara">
            <div class="horizontal-bar">
              <p>No terminará su gobierno</p>
              <dd class="percentage percentage-62">
                <span class="text">Noviembre: 62%</span>
              </dd>
              <dd class="percentage percentage-58">
                <span class="text">Diciembre: 58%</span>
              </dd>
              <dd class="percentage percentage-71">
                <span class="text">Diciembre: 71%</span>
              </dd>
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-12">
          <h2 class="font-weight-bold">
            Razones por las que no terminará su Gobierno
          </h2>
          <p>
            Las cuestionadas decisiones que ha tomado el presidente desde que
            asumió el Gobierno es el mayor motivo por el que se cree que no
            terminará su mandato. Así, un 63% señala su incapacidad para
            gobernar como la razón principal. Solo un 33% indica que es porque
            no lo dejan hacerlo.
          </p>
          <p class="question">
            ¿Por qué cree que Pedro Castillo no terminará su gobierno?
          </p>
          <div id="razones_castillo"></div>
        </div>
      </div> -->
    <!-- <div class="row">
        <div class="col-12">
          <h2 class="font-weight-bold">Alta desaprobación del Congreso</h2>
          <p>
            La valoración del Parlamento se mantiene con altos niveles de
            desaprobación, a pesar de que entre febrero y marzo de 2022 la
            percepción desfavorable retrocedió en un 3%. Así, un 79% rechaza su
            desempeño, mientras que tan solo un 17% aprueba su accionar.
          </p>
          <p class="question">
            ¿Usted aprueba o desaprueba el desempeño del Congreso de la
            República?
          </p>
          <div id="aprobacion_congreso"></div>
          <h2 class="font-weight-bold">
            Presidenta del Congreso mantiene sus niveles de desaprobación
          </h2>
          <p>
            La gestión de María del Carmen Alva, presidenta del Congreso, sigue
            siendo rechazada (69%) por la ciudadanía. Del otro lado, solo un 24%
            respalda el desempeño de la parlamentaria de Acción Popular, un 4%
            de valoración más que en la encuesta IEP de febrero 2022, en la que
            se situaba con un 20%.
          </p>
          <p class="question">
            ¿Usted aprueba o desaprueba el desempeño de la presidenta del
            Congreso, María del Carmen Alva?
          </p>
          <div id="aprobacion_mca"></div>
          <h2 class="font-weight-bold">
            Aumenta el rechazo de la gestión de Aníbal Torres
          </h2>
          <p>
            La percepción de la ciudadanía sobre el desempeño del jefe del
            gabinete ministerial, Aníbal Torres, se vuelve más negativa. Así,
            Torres logra un 61% de desaprobación, un 7% más en comparación con
            el mes anterior. En tanto, disminuye su aprobación también en 7% y
            alcanza un 29% de respaldo. Como se recuerda, el abogado asumió como
            titular de la PCM el último 8 de febrero.
          </p>
          <p class="question">
            ¿Está de acuerdo o en desacuerdo con la designación de Aníbal Torres
            como presidente del Consejo de Ministros?
          </p>
          <div id="aprobacion_anibal"></div>
          <h2 class="font-weight-bold">
            Ministros y ministras también desaprobados en su gestión
          </h2>
          <p>
            El 70% de la ciudadanía desaprueba el manejo de los ministerios. En
            otras palabras, 7 de cada 10 personas entrevistadas no está de
            acuerdo con el desempeño del
            <a
              href="https://public.flourish.studio/story/1176900/"
              target="_blank"
              >gabinete ministerial</a
            >
            . En la otra línea están las personas que aprueban (23%) la actual
            gestión de las carteras ministeriales.
          </p>
          <p class="question">
            ¿Usted aprueba o desaprueba el desempeño de los ministros?
          </p>
          <div id="aprobacion_ministros"></div>
          <h2 class="font-weight-bold">Hernán Condori sigue cuestionado</h2>
          <p>
            Sin cambios significativos de aprobación en su designación, aún un
            58% desaprueba la gestión de Hernán Condori como titular del
            Ministerio de Salud. Tan solo un 32% aprueba su desempeño. Esta
            última cifra es la más baja en comparación a los extitulares del
            Minsa.
          </p>
          <p class="question">
            ¿Usted aprueba o desaprueba el desempeño del ministro de Salud,
            Hernán Condori?
          </p>
          <div id="ministro_salud"></div>
          <h2 class="font-weight-bold">
            La mitad de la población está en contra del indulto de Fujimori
          </h2>
          <p>
            Poco más de la mitad (52%) de las personas encuestadas está en
            contra del reciente indulto otorgado al exdictador Alberto Fujimori.
            Ello contrasta con el 43% que está a favor de la
            <a
              href="https://data.larepublica.pe/indulto-a-fujimori-todos-los-caminos-lo-llevan-de-vuelta-al-penal-de-barbadillo/"
              target="_blank"
              >cuestionada medida dada por el Tribunal Constitucional</a
            >. En enero de 2018, según datos de GfK para La República, se
            evidenció aún más la polarización del país. En ese entonces, el 50%
            estaba de acuerdo y el 49% en contra de la liberación del
            expresidente.
          </p>
          <p class="question">
            ¿Está a favor o en contra del reciente indulto a Alberto Fujimori?
          </p>
          <div id="indulto_fujimori"></div>
        </div>
      </div> -->
    <!-- </div> -->

    <div class="container" id="desagregado_1">
      <img src="hr.png" alt="" class="separador" />
      <h2 class="font-weight-bold">
        Pedro Castillo: aprobación del presidente por nivel socioeconómico
      </h2>
      <p>
        La aprobación del presidente volvió a disminuir, aunque de forma ligera,
        en los sectores socioeconómicos D y E: cayó de 36% a 33% en el último
        mes. Asimismo, en el sector socioeconómico C tuvo apenas un repunte de 3
        puntos porcentuales. En los niveles A y B este indicador alcanza apenas
        un 18%.
      </p>
      <p class="question">
        ¿Usted aprueba o desaprueba la forma como Pedro Castillo está
        conduciendo su gobierno?
      </p>
      <select id="aprueba_desaprueba">
        <option>Aprobación</option>
        <option>Desaprobación</option>
      </select>
      <div id="aprobacion_nse"></div>
      <h2 class="font-weight-bold">
        Aprobación de Pedro Castillo en ámbitos urbano y rural
      </h2>
      <p>
        La aprobación por ámbitos urbano, rural y en Lima Metropolitana respecto
        al mandatario, no muestra una variación significativa respecto al mes
        pasado. Mientras que en el Perú urbano se mantuvo en 32%, en Lima
        Metropolitana disminuyó de 18% a 17%. A su vez, en el Perú rural,
        principal capital político de Castillo, se incrementó de 39% a 40%.
      </p>
      <p class="question">
        ¿Usted aprueba o desaprueba la forma como Pedro Castillo está
        conduciendo su gobierno?
      </p>
      <div id="aprobacion_ambito"></div>
      <h2 class="font-weight-bold">Aprobación de Castillo por macrozonas</h2>
      <div class="row">
        <div class="col-12">
          <p>
            Una caída significativa presenta la valoración del presidente
            segmentada en macrozonas. Solo en el Norte (33%) y en el Sur (45%)
            se muestra una ligera subida. En tanto, en el Centro, en Oriente, y
            en Lima Metropolitana, se da una reducción de varios puntos
            porcentuales, con una aprobación de 25%, 27% y 17%, respectivamente.
          </p>
          <label id="week_a_week"></label>
          <input id="slider" type="range" min="1" max="8" step="1" value="8" />
          <p class="question">
            ¿Usted aprueba o desaprueba la forma como Pedro Castillo está
            conduciendo su gobierno?
          </p>
        </div>
        <div id="map"></div>
      </div>
    </div>
    <div class="container">
      <div class="row mt-21">
        <div class="col-12">
          <p class="question text-left">FICHA TÉCNICA:</p>
          <p class="ficha_tecnica">
            Encuestadora: Instituto de Estudios Peruanos (IEP). Registro:
            0393-REE/JNE – 281-2021-DCGI/JNE. Financiación del estudio: Diario
            La República y recursos propios del IEP. Objetivo del estudio:
            Recoger la opinión de la ciudadanía sobre coyuntura política.Tamaño
            de la población objeto de estudio: población de 18 años a más con
            DNI, en zonas urbanas y rurales: 24,290,921 personas. Fuente:
            RENIEC. Padrón Electoral de las Elecciones Generales 2021. Tamaño y
            distribución de la muestra: 1205 entrevistados distribuidos en 24
            departamentos, 150 provincias y 408 distritos*. Margen de error: ±
            2.8 pts. para los resultados a nivel nacional. Nivel de confianza:
            95% considerando una varianza máxima en las proporciones
            poblacionales (p=q=0.5). Representatividad: 95.4%. Fuente de marco
            muestral: Relación de cabeceras de operadores de móviles. Ministerio
            de Transportes y Comunicaciones (2019).Tipo de muestreo aplicado:
            Muestreo probabilístico, con método de selección aleatoria de
            números de celular. Encuesta telefónica. Puntos de muestreo: Lima
            Metropolitana, Perú urbano, Perú rural. Fecha de campo: Del 20 al 23
            de junio de 2022. Página web:
            <a href="www.iep.org.pe">www.iep.org.pe</a>.
                </p>
            </div>
            <!-- <div class="col-12">
                  <iframe class="iframe_yt" width="100%" height="420" src="https://www.youtube.com/embed/GMUVKkKjAX8" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
              </div> -->

            <div class="historico">
                <span>Histórico de encuestas:</span>
                <a role="button" class="btn btn-outline-danger" style="margin-right: 10px" href="mayo-2022/">
            Mayo 2022
          </a>
                <a role="button" class="btn btn-outline-danger" style="margin-right: 10px" href="abril-2022/">
            Abril 2022
          </a>
                <a role="button" class="btn btn-outline-danger" style="margin-right: 10px" href="marzo-2022/">
            Marzo 2022
          </a>
                <a role="button" class="btn btn-outline-danger" style="margin-right: 10px" href="febrero-2022/">
            Febrero 2022
          </a>
                <a role="button" class="btn btn-outline-danger" style="margin-right: 10px" href="enero-2022/">
            Enero 2022
          </a>
                <a role="button" class="btn btn-outline-danger" href="diciembre-2021/">
            Diciembre 2021
          </a>
            </div>
        </div>
    </div>
    <footer style="background-color: #f0f0f0">
        <div class="w-1000">
            <span><strong>Redacción:</strong> María Morales</span>
            <span><strong>Desarrollo Web:</strong> Génesis León</span>
            <br />
            <span>© Grupo La República </span>
            <span>Todos los derechos reservados.</span>
        </div>
    </footer>
    <script defer src="https://www.googletagmanager.com/gtag/js?id=UA-6536106-1"></script>
    <script type="text/javascript" defer>
        function gtag() {
            dataLayer.push(arguments);
        }
        (window.dataLayer = window.dataLayer || []),
        gtag("js", new Date()),
            gtag("config", "UA-6536106-1");
    </script>
    <script>
        //         colores:["#de425b",
        // "#7580d8",
        // "#60af64",
        // "#bb6336",
        // "#ab9a3e",
        // "#48b1c4",
        // "#c05eab"]
        // $(".percentage").mouseover(function() {
        //     console.log(this, "this");
        //     $(".text").css("text-decoration", "none");
        //     $(this).children().css("text-decoration", "underline");
        // });

        mapboxgl.accessToken =
            "pk.eyJ1IjoiZ2VueWxlb25nIiwiYSI6ImNsNGVodDUxdjAwMXEza2wwejF0NHFnNDMifQ.m8_ortP8i8q2ZhkBAeGm3w";

        var map = new mapboxgl.Map({
            container: "map",
            center: [-75.178, -9.184],
            minZoom: 3,
            zoom: 3.8,
            style: "mapbox://styles/mapbox/light-v10",
        });

        var array = [];
        //var n = 0
        function getColor(n) {
            var inputEl = document.getElementById("slider");

            inputEl.onchange = function(event) {
                //console.log(event.isTrusted);
                array = [];
            };

            array.push(n);
            array = _.uniq(array, true);

            array = array.sort(function(a, b) {
                return a - b;
            });

            // console.log(array);
            //var element = 0
            //array.forEach;
            for (let i = 0; i < array.length && array.length > 2; i++) {
                // console.log(array[i]);

                if (array.length == 4) {
                    return n >= array[3] ?
                        "#800026" :
                        n >= array[2] ?
                        "#bd0026" :
                        n >= array[1] ?
                        "#e31a1c" :
                        n >= array[0] ?
                        "#fc4e2a" :
                        n >= 0 ?
                        "#fd8d3c" :
                        "#ffffcc";
                }

                if (array.length == 4) {
                    return n >= array[3] ?
                        "#800026" :
                        n >= array[2] ?
                        "#bd0026" :
                        n >= array[1] ?
                        "#e31a1c" :
                        n >= array[0] ?
                        "#fc4e2a" :
                        n >= 0 ?
                        "#fd8d3c" :
                        "#ffffcc";
                }

                if (array.length == 5) {
                    return n >= array[4] ?
                        "#800026" :
                        n >= array[3] ?
                        "#bd0026" :
                        n >= array[2] ?
                        "#e31a1c" :
                        n >= array[1] ?
                        "#fc4e2a" :
                        n >= array[0] ?
                        "#fd8d3c" :
                        "#ffffcc";
                }
            }
        }

        function filterBy(data, covid_filter, week) {
            array = [];
            //console.log(data, covid_filter, week);
            features = data.features.map((d, b) => {
                var popup = new mapboxgl.Popup();
                var layerID = d.properties.MACRO_ZONA;

                //console.log(layerID);

                // if (week == "8") {
                //console.log(week, casos);

                provincia = _.chain(casos[week].users)
                    .keyBy("zona")
                    .mapValues("aprobacion")
                    .value();

                document.getElementById("week_a_week").textContent =
                    casos[week]["periodo"];

                console.log(casos[week]["periodo"]);

                if (provincia[layerID] !== "") {
                    //array = []

                    console.log(array, provincia[layerID]);

                    map.setPaintProperty(
                        layerID,
                        "fill-color",
                        getColor(provincia[layerID])
                    );

                    function _isContains(json, value) {
                        let contains = false;
                        Object.keys(json).some((key) => {
                            contains =
                                typeof json[key] === "object" ?
                                _isContains(json[key], value) :
                                json[key] === value;
                            return contains;
                        });
                        return contains;
                    }

                    map.on("click", layerID, function(e) {
                        total_provincia = casos[week].users;

                        for (prov in total_provincia) {
                            //console.log(total_provincia)
                            getProv = e.features[0].properties.MACRO_ZONA;
                            // getDep = e.features[0].properties.MACRO_ZONA;

                            getProvName = total_provincia[prov]["zona"];

                            checkValue = _isContains(total_provincia, getProv);
                            //console.log(getProvName, getProv, prov);
                            if (getProv == getProvName && checkValue == true) {
                                casos_aprobacion = total_provincia[prov]["aprobacion"];

                                casos_desaprobacion = total_provincia[prov]["desaprobacion"];
                                // casos_mujeres = total_provincia[prov]["FEMENINO"];
                                // casos_hombres = total_provincia[prov]["MASCULINO"];
                            }
                        }

                        var x, i;
                        x = document.querySelectorAll(".mapboxgl-popup");
                        for (i = 0; i < x.length; i++) {
                            x[i].remove();
                        }
                        //$(".mapboxgl-popup").remove();
                        popup
                            .setLngLat(e.lngLat)
                            .setHTML(
                                "<p class='macro_zona'>Macrozona: " +
                                getProv +
                                "</p><p class='provincia'>" +
                                d3.format(",")(Math.round(casos_aprobacion)) +
                                " % de aprobación.</p><p class='provincia'>" +
                                d3.format(",")(Math.round(casos_desaprobacion)) +
                                "% de desaprobación. </p>"
                            )
                            .addTo(map);
                    });
                }

                map.on("mouseenter", layerID, function() {
                    map.getCanvas().style.cursor = "pointer";
                });

                // Change it back to a pointer when it leaves.
                map.on("mouseleave", layerID, function() {
                    map.getCanvas().style.cursor = "";
                });

                map.setFilter(layerID, ["==", ["get", "MACRO_ZONA"], layerID]);
            });
        }

        map.on("load", async function() {
            //var result = [];
            var files = [" geojson.json", "aprob_zonas.json"];

            const data = await d3.json(files[0]);
            const data_covid = await d3.json(files[1]);
            const covid_filter = data_covid["data"];
            var array = [];

            map["dragPan"].disable();

            map.addSource("data", {
                type: "geojson",
                data: data,
            });

            data.features.forEach(function(d, b) {
                var layerID = d.properties.MACRO_ZONA;

                //console.log(layerID) zona
                casos = _.chain(covid_filter)
                    .groupBy("periodo")
                    .toPairs()
                    .map(function(currentData) {
                        return _.zipObject(["periodo", "users"], currentData);
                    })
                    .value();

                console.log(casos);

                provincia = _.chain(casos[7].users)
                    .keyBy("zona")
                    .mapValues("aprobacion")
                    .value();

                // console.log(provincia);

                if (!map.getLayer(layerID) && provincia[layerID] !== "") {
                    //array = []
                    //             array.push(provincia[layerID]);
                    //           array = _.uniq(array, true);

                    //           array = array.sort(function(a, b){return a-b});

                    //console.log(array);

                    map.addLayer({
                        id: layerID,
                        type: "fill",
                        source: "data",
                        layout: {},
                        paint: {
                            "fill-color": getColor(provincia[layerID]),
                            "fill-opacity": 0.6,
                        },
                    });
                }
            });

            filterBy(data, covid_filter, 7);

            document
                .getElementById("slider")
                .addEventListener("input", function(e) {
                    var week = parseInt(e.target.value - 1);
                    console.log(e.target.value);
                    filterBy(data, covid_filter, week);
                });
        });

        var firstTime = 0;

        $(window).on("scroll", function() {
            //centerDiv("#congreso_castillo");
        });

        $.when($.getJSON("data-iep.json")).then(function(data) {
            var castillo_nsnp = data["castillo_nsnp"];
            var castillo_aprueba = data["castillo_aprueba"];
            var castillo_desaprueba = data["castillo_desaprueba"];

            var congreso_nsnp = data["congreso_nsnp"];
            var congreso_aprueba = data["congreso_aprueba"];
            var congreso_desaprueba = data["congreso_desaprueba"];

            var nse_a = data["nse_a"];
            var nse_b = data["nse_b"];
            var nse_c = data["nse_c"];
            var nse_d = data["nse_d"];
            var nse_e = data["nse_e"];

            var ambito_lima = data["ambito_lima"];
            var ambito_rural = data["ambito_rural"];
            var ambito_urbano = data["ambito_urbano"];

            var aprobacion_ideologia_agosto = data["aprobacion_ideologia_agosto"];
            var aprobacion_ideologia_setiembre =
                data["aprobacion_ideologia_setiembre"];
            var aprobacion_ideologia_octubre = data["aprobacion_ideologia_octubre"];

            var mca_aprueba = data["mca_aprueba"];
            var mca_desaprueba = data["mca_desaprueba"];
            var mca_nsnp = data["mca_nsnp"];

            var anibal_desaprueba = data["anibal_desaprueba"];
            var anibal_aprueba = data["anibal_aprueba"];
            var anibal_nsnp = data["anibal_nsnp"];

            function filter_datita(data, filteredValue) {
                //console.log(data, filteredValue);
                if (
                    data == castillo_nsnp ||
                    data == castillo_aprueba ||
                    data == castillo_desaprueba
                ) {
                    return _.filter(
                        data,
                        (e) => e["p01"].toLowerCase() === filteredValue
                    );
                }

                if (
                    data == congreso_nsnp ||
                    data == congreso_aprueba ||
                    data == congreso_desaprueba
                ) {
                    return _.filter(
                        data,
                        (e) => e["p05_3"].toLowerCase() === filteredValue
                    );
                }

                if (
                    data == nse_a ||
                    data == nse_b ||
                    data == nse_c ||
                    data == nse_d ||
                    data == nse_e
                ) {
                    return _.filter(
                        data,
                        (e) => e["p01"].toLowerCase() === filteredValue
                    );
                }

                if (
                    data == ambito_lima ||
                    data == ambito_rural ||
                    data == ambito_urbano
                ) {
                    return _.filter(
                        data,
                        (e) => e["p01"].toLowerCase() === filteredValue
                    );
                }

                // if (
                //   data == aprobacion_ideologia_agosto ||
                //   data == aprobacion_ideologia_setiembre ||
                //   data == aprobacion_ideologia_octubre
                // ) {
                //   return _.filter(
                //     data,
                //     e => e["periodo"].toLowerCase() === filteredValue
                //   );
                // }

                if (
                    data == mca_aprueba ||
                    data == mca_desaprueba ||
                    data == mca_nsnp
                ) {
                    return _.filter(
                        data,
                        (e) => e["p01"].toLowerCase() === filteredValue
                    );
                }

                if (
                    data == anibal_aprueba ||
                    data == anibal_desaprueba ||
                    data == anibal_nsnp
                ) {
                    return _.filter(
                        data,
                        (e) => e["p01"].toLowerCase() === filteredValue
                    );
                }
            }

            const corrupcion_generalizada = bb.generate({
                data: {
                    columns: [
                        ["data1", 78, 74, 73, 66, 61, 59],
                        ["data2", 10, 12, 13, 15, 20, 17],
                        ["data3", 7, 8, 8, 11, 11, 12],
                        ["data4", 4, 5, 5, 6, 6, 8],
                        ["data5", 1, 1, 1, 2, 2, 4],
                    ],
                    type: "bar", // for ESM specify as: bar()
                    names: {
                        data1: "Mucho ",
                        data2: "Algo ",
                        data3: "Poco ",
                        data4: "Nada ",
                        data5: "NS/NP ",
                    },
                    colors: {
                        data1: "#adcc76",
                        data2: "#f7c856",
                        data3: "#de425b",
                        data4: "#76ADCC",
                        data5: "#CC76AD",
                    },
                },
                axis: {
                    x: {
                        type: "category",
                        categories: [
                            "El congreso",
                            "Las municipalidades",
                            "Los gobiernos regionales",
                            "El poder ejecutivo",
                            "Las empresas privadas",
                            "El entorno del Presidente Castillo",
                        ],
                    },
                },
                bar: 10,
                tooltip: {
                    format: {
                        value: function(value, ratio, id) {
                            return d3.format(",")(Math.round(value)) + "%";
                        },
                    },
                },
                bindto: "#corrupcion_generalizada",
            });

            // const reforma_constitucion = bb.generate({
            //     data: {
            //         columns: [
            //             ["data1", 53, 29, 16, 1],
            //             ["data2", 66, 16, 16, 2],
            //             ["data3", 43, 36, 17, 5],
            //         ],
            //         type: "bar", // for ESM specify as: bar()
            //         names: {
            //             data1: "Ha leído algunos artículos",
            //             data2: "Ha leído toda la constitución",
            //             data3: "No la ha leído",
            //         },
            //         colors: {
            //             data1: "#adcc76",
            //             data2: "#f7c856",
            //             data3: "#de425b",
            //         },
            //     },
            //     axis: {
            //         x: {
            //             type: "category",
            //             categories: ["Opción 1", "Opción 2", "Opción 3", "Opción 4"],
            //         },
            //     },
            //     bar: 10,
            //     tooltip: {
            //         format: {
            //             value: function(value, ratio, id) {
            //                 return d3.format(",")(Math.round(value)) + "%";
            //             },
            //         },
            //     },
            //     bindto: "#reforma_constitucion",
            // });

            var perspectiva_1_castillo = bb.generate({
                data: {
                    columns: [
                        ["data1", 53, 28],
                        ["data2", 43, 66],
                    ],
                    type: "bar",
                    names: {
                        data1: "Mucho/Algo",
                        data2: "Poco/Nada",
                    },
                    colors: {
                        data1: "#adcc76",
                        data2: "#ffe48f",
                        // data3: "#de425b",
                    },
                    groups: [
                        ["data1", "data2"]
                    ],
                },
                bar: {
                    padding: 5,
                },
                axis: {
                    x: {
                        type: "category",
                        categories: ["Ago-21", "Jun-22"],
                    },
                },
                grid: {
                    y: {
                        lines: [{
                            value: 0,
                        }, ],
                    },
                },
                bindto: "#perspectiva_1_castillo",
            });

            var perspectiva_2_castillo = bb.generate({
                data: {
                    columns: [
                        ["data1", 57, 53, 42, 39, 28],
                        ["data2", 39, 43, 54, 58, 69],
                    ],
                    type: "bar",
                    names: {
                        data1: "Mucho/Algo",
                        data2: "Poco/Nada",
                    },
                    colors: {
                        data1: "#adcc76",
                        data2: "#ffe48f",
                        // data3: "#de425b",
                    },
                    groups: [
                        ["data1", "data2"]
                    ],
                },
                bar: {
                    padding: 5,
                },
                axis: {
                    x: {
                        type: "category",
                        categories: ["Ago-21", "Sep-21", "Dic-21", "Feb-22", "Jun-22"],
                    },
                },
                grid: {
                    y: {
                        lines: [{
                            value: 0,
                        }, ],
                    },
                },
                bindto: "#perspectiva_2_castillo",
            });

            var perspectiva_3_castillo = bb.generate({
                data: {
                    columns: [
                        ["data1", 46, 44, 35, 31, 25],
                        ["data2", 53, 54, 63, 67, 73],
                    ],
                    type: "bar",
                    names: {
                        data1: "Mucho/Algo",
                        data2: "Poco/Nada",
                    },
                    colors: {
                        data1: "#adcc76",
                        data2: "#ffe48f",
                        // data3: "#de425b",
                    },
                    groups: [
                        ["data1", "data2"]
                    ],
                },
                bar: {
                    padding: 5,
                },
                axis: {
                    x: {
                        type: "category",
                        categories: ["Ago-21", "Sep-21", "Dic-21", "Feb-22", "Jun-22"],
                    },
                },
                grid: {
                    y: {
                        lines: [{
                            value: 0,
                        }, ],
                    },
                },
                bindto: "#perspectiva_3_castillo",
            });

            var perspectiva_4_castillo = bb.generate({
                data: {
                    columns: [
                        ["data1", 51, 39, 36, 28],
                        ["data2", 47, 59, 61, 69],
                    ],
                    type: "bar",
                    names: {
                        data1: "Mucho/Algo",
                        data2: "Poco/Nada",
                    },
                    colors: {
                        data1: "#adcc76",
                        data2: "#ffe48f",
                        // data3: "#de425b",
                    },
                    groups: [
                        ["data1", "data2"]
                    ],
                },
                bar: {
                    padding: 5,
                },
                axis: {
                    x: {
                        type: "category",
                        categories: ["Sep-21", "Dic-21", "Feb-22", "Jun-22"],
                    },
                },
                grid: {
                    y: {
                        lines: [{
                            value: 0,
                        }, ],
                    },
                },
                bindto: "#perspectiva_4_castillo",
            });

            var perspectiva_5_castillo = bb.generate({
                data: {
                    columns: [
                        ["data1", 46, 35, 33, 25],
                        ["data2", 51, 61, 65, 73],
                    ],
                    type: "bar",
                    names: {
                        data1: "Mucho/Algo",
                        data2: "Poco/Nada",
                    },
                    colors: {
                        data1: "#adcc76",
                        data2: "#ffe48f",
                        // data3: "#de425b",
                    },
                    groups: [
                        ["data1", "data2"]
                    ],
                },
                bar: {
                    padding: 5,
                },
                axis: {
                    x: {
                        type: "category",
                        categories: ["Sep-21", "Dic-21", "Feb-22", "Jun-22"],
                    },
                },
                grid: {
                    y: {
                        lines: [{
                            value: 0,
                        }, ],
                    },
                },
                bindto: "#perspectiva_5_castillo",
            });

            // var aprobacion_ministros = bb.generate({
            //     data: {
            //         columns: [
            //             ["data1", 7],
            //             ["data2", 23],
            //             ["data3", 70],
            //         ],
            //         type: "donut", // for ESM specify as: donut()
            //         names: {
            //             data1: "No contesta",
            //             data2: "Aprueba",
            //             data3: "Desaprueba",
            //         },
            //         colors: {
            //             data1: "#ffe48f",
            //             data2: "#adcc76",
            //             data3: "#de425b",
            //         },
            //         onclick: function(d, i) {
            //             // console.log("onclick", d, i);
            //         },
            //         onover: function(d, i) {
            //             // console.log("onover", d, i);
            //         },
            //         onout: function(d, i) {
            //             // console.log("onout", d, i);
            //         },
            //     },
            //     donut: {
            //         title: "Aprobación de Ministros",
            //     },
            //     tooltip: {
            //         format: {
            //             title: function(id) {
            //                 return id;
            //             },
            //             value: function(value, ratio, id) {
            //                 return d3.format(",")(value.toFixed(1)) + "%";
            //             },
            //         },
            //     },
            //     bindto: "#aprobacion_ministros",
            // });

            var aprobacion_castillo = bb.generate({
                data: {
                    columns: [
                        [
                            "data1",
                            ...filter_datita(castillo_nsnp, "ns/np").map(
                                (o) => o.PERCENTAGE
                            ),
                        ],
                        [
                            "data2",
                            ...filter_datita(castillo_aprueba, "aprueba").map(
                                (o) => o.PERCENTAGE
                            ),
                        ],
                        [
                            "data3",
                            ...filter_datita(castillo_desaprueba, "desaprueba").map(
                                (o) => o.PERCENTAGE
                            ),
                        ],
                    ],
                    types: {
                        data1: "line", // for ESM specify as: D()
                        data2: "line",
                        data3: "line",
                    },
                    names: {
                        data1: "No contesta",
                        data2: "Aprueba",
                        data3: "Desaprueba",
                    },
                    colors: {
                        data1: "#ffe48f",
                        data2: "#adcc76",
                        data3: "#de425b",
                    },
                    labels: false,
                    // labels :{
                    //   colors: "#FFF"
                    // }
                },
                axis: {
                    x: {
                        type: "category",
                        categories: [
                            "Ene 22",
                            "Feb 22",
                            "Mar 22",
                            "Abr 22",
                            "May 22",
                            "Jun 22",
                        ],
                    },
                },
                tooltip: {
                    format: {
                        value: function(value, ratio, id) {
                            return d3.format(",")(value.toFixed(1)) + "%";
                        },
                    },
                },
                legend: {
                    show: true,
                    position: "bottom", // bottom, right, inset
                    padding: 0,
                    inset: {
                        anchor: "bottom-right", // top-left, top-right, bottom-left, bottom-right
                        x: 20,
                        y: 50,
                        step: 2,
                    },
                },
                bindto: "#aprobacion_castillo",
            });

            var aprobacion_congreso = bb.generate({
                data: {
                    columns: [
                        [
                            "data1",
                            ...filter_datita(congreso_nsnp, "ns/np").map(
                                (o) => o.PERCENTAGE
                            ),
                        ],
                        [
                            "data2",
                            ...filter_datita(congreso_aprueba, "aprueba").map(
                                (o) => o.PERCENTAGE
                            ),
                        ],
                        [
                            "data3",
                            ...filter_datita(congreso_desaprueba, "desaprueba").map(
                                (o) => o.PERCENTAGE
                            ),
                        ],
                    ],
                    types: {
                        data1: "line", // for ESM specify as: step()
                        data2: "line",
                        data3: "line",
                    },
                    names: {
                        data1: "No contesta",
                        data2: "Aprueba",
                        data3: "Desaprueba",
                    },
                    colors: {
                        data1: "#ffe48f",
                        data2: "#adcc76",
                        data3: "#de425b",
                    },
                    labels: false,
                    // labels :{
                    //   colors: "#FFF"
                    // }
                },
                axis: {
                    x: {
                        type: "category",
                        categories: [
                            "Ene-22",
                            "Feb-22",
                            "Mar-22",
                            "Abr-22",
                            "May-22",
                            "Jun-22",
                        ],
                    },
                },
                tooltip: {
                    format: {
                        value: function(value, ratio, id) {
                            return d3.format(",")(Math.round(value)) + "%";
                        },
                    },
                },
                bindto: "#aprobacion_congreso",
            });

            var nse_aprobacion = bb.generate({
                data: {
                    columns: [
                        [
                            "data1",
                            ...filter_datita(nse_a, "aprueba").map((o) => o.PERCENTAGE),
                        ],
                        [
                            "data2",
                            ...filter_datita(nse_c, "aprueba").map((o) => o.PERCENTAGE),
                        ],
                        [
                            "data3",
                            ...filter_datita(nse_d, "aprueba").map((o) => o.PERCENTAGE),
                        ],
                        // [
                        //   "data4",
                        //   ...filter_datita(nse_d, "aprueba").map(o => o.PERCENTAGE)
                        // ],
                        // [
                        //   "data5",
                        //   ...filter_datita(nse_e, "aprueba").map(o => o.PERCENTAGE)
                        // ]
                    ],
                    type: "bubble", // for ESM specify as: bubble()
                    names: {
                        data1: "NSE A/B",
                        data2: "NSE C",
                        data3: "NSE D/E",
                    },
                    colors: {
                        data1: "#7580d8",
                        data2: "#60af64",
                        data3: "#bb6336",
                    },
                    labels: false,
                },
                bubble: {
                    maxR: 25,
                },
                axis: {
                    x: {
                        type: "category",
                        categories: [
                            "Ene-22",
                            "Feb-22",
                            "Mar-22",
                            "Abr-22",
                            "May-22",
                            "Jun-22",
                        ],
                    },
                    y: {
                        label: "Porcentaje (%)",
                        max: 100,
                    },
                },
                tooltip: {
                    grouped: true,
                    format: {
                        value: function(value, ratio, id) {
                            return d3.format(",")(Math.round(value)) + "%";
                        },
                    },
                },
                legend: {
                    position: "bottom", // bottom, right, inset
                    padding: 10,
                    inset: {
                        anchor: "bottom-right", // top-left, top-right, bottom-left, bottom-right
                        x: 20,
                        y: -10,
                    },
                },
                bindto: "#aprobacion_nse",
            });

            var instituciones_corrupcion = bb.generate({
                data: {
                    columns: [
                        ["data1", 95, 92, 94, 81, 90, 90],
                        ["data2", 90, 88, 90, 83, 85, 84],
                        ["data3", 84, 82, 81, 79, 74, 66],
                        // [
                        //   "data4",
                        //   ...filter_datita(nse_d, "aprueba").map(o => o.PERCENTAGE)
                        // ],
                        // [
                        //   "data5",
                        //   ...filter_datita(nse_e, "aprueba").map(o => o.PERCENTAGE)
                        // ]
                    ],
                    type: "bubble", // for ESM specify as: bubble()
                    names: {
                        data1: "NSE A/B",
                        data2: "NSE C",
                        data3: "NSE D/E",
                    },
                    colors: {
                        data1: "#ffe48f",
                        data2: "#adcc76",
                        data3: "#de425b",
                    },
                    labels: false,
                },
                bubble: {
                    maxR: 25,
                },
                axis: {
                    x: {
                        type: "category",
                        categories: [
                            "El congreso",
                            "Las municipalidades",
                            "Los gobiernos regionales",
                            "Las empresas privadas",
                            "El poder ejecutivo",
                            "El entorno del presidente",
                        ],
                    },
                    y: {
                        label: "Porcentaje (%)",
                        max: 100,
                    },
                },
                tooltip: {
                    grouped: true,
                    format: {
                        value: function(value, ratio, id) {
                            return d3.format(",")(Math.round(value)) + "%";
                        },
                    },
                },
                legend: {
                    position: "bottom", // bottom, right, inset
                    padding: 10,
                    inset: {
                        anchor: "bottom-right", // top-left, top-right, bottom-left, bottom-right
                        x: 20,
                        y: -10,
                    },
                },
                bindto: "#instituciones_corrupcion",
            });

            var instituciones_macrozonas = bb.generate({
                data: {
                    columns: [
                        ["data1", 90, 90, 89, 82, 87, 85],
                        ["data2", 9, 9, 10, 15, 11, 14],
                    ],
                    type: "bar", // for ESM specify as: bubble()
                    names: {
                        data1: "Mucho/Algo",
                        data2: "Nada/Poco",
                    },
                    colors: {
                        data1: "#de425b",
                        data2: "#ffe48f",
                    },
                    // colors: {
                    //     data1: "#7580d8",
                    //     data2: "#60af64",
                    //     data3: "#bb6336",
                    // },
                    // labels: false,
                },
                // bubble: {
                //     maxR: 25,
                // },
                axis: {
                    x: {
                        type: "category",
                        categories: [
                            "El congreso",
                            "Las municipalidades",
                            "Los gobiernos regionales",
                            "Las empresas privadas",
                            "El poder ejecutivo",
                            "El entorno del presidente",
                        ],
                    },
                },
                tooltip: {
                    grouped: true,
                    format: {
                        value: function(value, ratio, id) {
                            return d3.format(",")(Math.round(value)) + "%";
                        },
                    },
                },
                legend: {
                    position: "bottom", // bottom, right, inset
                    padding: 10,
                    inset: {
                        anchor: "bottom-right", // top-left, top-right, bottom-left, bottom-right
                        x: 20,
                        y: -10,
                    },
                },
                bindto: "#instituciones_macrozonas",
            });

            document
                .getElementById("aprueba_desaprueba")
                .addEventListener("change", function() {
                    var obj = document.getElementById("aprueba_desaprueba");
                    obj_select = obj.options[obj.selectedIndex].text;
                    console.log(obj_select);

                    if (obj_select == "Aprobación") {
                        nse_aprobacion.load({
                            columns: [
                                [
                                    "data1",
                                    ...filter_datita(nse_a, "aprueba").map((o) => o.PERCENTAGE),
                                ],
                                [
                                    "data2",
                                    ...filter_datita(nse_c, "aprueba").map((o) => o.PERCENTAGE),
                                ],
                                [
                                    "data3",
                                    ...filter_datita(nse_d, "aprueba").map((o) => o.PERCENTAGE),
                                ],
                            ],
                        });
                    }

                    if (obj_select == "Desaprobación") {
                        nse_aprobacion.load({
                            columns: [
                                [
                                    "data1",
                                    ...filter_datita(nse_a, "desaprueba").map(
                                        (o) => o.PERCENTAGE
                                    ),
                                ],
                                [
                                    "data2",
                                    ...filter_datita(nse_c, "desaprueba").map(
                                        (o) => o.PERCENTAGE
                                    ),
                                ],
                                [
                                    "data3",
                                    ...filter_datita(nse_d, "desaprueba").map(
                                        (o) => o.PERCENTAGE
                                    ),
                                ],
                            ],
                        });
                    }
                });

            document
                .getElementById("select_macrozonas")
                .addEventListener("change", function() {
                    var obj = document.getElementById("select_macrozonas");
                    obj_select = obj.options[obj.selectedIndex].text;
                    console.log(obj_select);

                    if (obj_select == "Lima Metropolitana") {
                        instituciones_macrozonas.load({
                            columns: [
                                ["data1", 90, 90, 89, 82, 87, 85],
                                ["data2", 9, 9, 10, 15, 11],
                                14,
                            ],
                        });
                    }
                    //         <option>Norte</option>
                    // <option>Centro</option>
                    // <option>Sur</option>
                    // <option>Oriente</option>
                    if (obj_select == "Norte") {
                        instituciones_macrozonas.load({
                            columns: [
                                ["data1", 87, 85, 86, 80, 75, 66],
                                ["data2", 13, 14, 13, 17, 22, 30],
                            ],
                        });
                    }
                    if (obj_select == "Centro") {
                        instituciones_macrozonas.load({
                            columns: [
                                ["data1", 90, 85, 91, 83, 80, 75],
                                ["data2", 11, 15, 9, 16, 16, 22],
                            ],
                        });
                    }
                    if (obj_select == "Sur") {
                        instituciones_macrozonas.load({
                            columns: [
                                ["data1", 87, 83, 86, 80, 79, 74],
                                ["data2", 10, 16, 12, 17, 19, 21],
                            ],
                        });
                    }
                    if (obj_select == "Oriente") {
                        instituciones_macrozonas.load({
                            columns: [
                                ["data1", 86, 82, 77, 79, 76, 75],
                                ["data2", 13, 16, 21, 18, 21, 20],
                            ],
                        });
                    }
                });

            var aprobacion_ambito = bb.generate({
                data: {
                    columns: [
                        [
                            "data1",
                            ...filter_datita(ambito_lima, "aprueba").map(
                                (o) => o.PERCENTAGE
                            ),
                        ],
                        [
                            "data2",
                            ...filter_datita(ambito_rural, "aprueba").map(
                                (o) => o.PERCENTAGE
                            ),
                        ],
                        [
                            "data3",
                            ...filter_datita(ambito_urbano, "aprueba").map(
                                (o) => o.PERCENTAGE
                            ),
                        ],
                    ],
                    type: "bar", // for ESM specify as: bubble()
                    names: {
                        data1: "Lima Metropolitana",
                        data2: "Perú rural",
                        data3: "Perú urbano",
                    },
                    colors: {
                        data1: "#7580d8",
                        data2: "#60af64",
                        data3: "#bb6336",
                    },
                    labels: false,
                },
                axis: {
                    x: {
                        type: "category",
                        categories: [
                            "Ene-22",
                            "Feb-22",
                            "Mar-22",
                            "Abr-22",
                            "May-22",
                            "Jun-22",
                        ],
                    },
                    y: {
                        label: "Aprobación (%)",
                        max: 95,
                    },
                },
                tooltip: {
                    format: {
                        value: function(value, ratio, id) {
                            return d3.format(",")(value.toFixed(1)) + "%";
                        },
                    },
                },
                bindto: "#aprobacion_ambito",
            });

            // var aprobacion_ambito_vacancia = bb.generate({
            //     data: {
            //         columns: [
            //             ["data1", 83, 80, 74],
            //             ["data2", 80, 9, 5],
            //             ["data3", 74, 8, 5],
            //         ],
            //         type: "bar", // for ESM specify as: bubble()
            //         names: {
            //             data1: "Que haya elecciones generales y se elija nuevo presidente y nuevos congresistas.",
            //             data2: "Que la vicepresidenta Dina Boluarte asuma la presidencia.",
            //             data3: "Que haya elecciones presidenciales y se mantengan los mismos congresistas.",
            //         },
            //         colors: {
            //             data1: "#7580d8",
            //             data2: "#60af64",
            //             data3: "#bb6336",
            //         },
            //         labels: false,
            //     },
            //     axis: {
            //         x: {
            //             type: "category",
            //             categories: ["Lima Metropolitana", "Perú rural", "Perú urbano"],
            //         },
            //         y: {
            //             label: "Aprobación (%)",
            //             max: 95,
            //         },
            //     },
            //     tooltip: {
            //         format: {
            //             value: function(value, ratio, id) {
            //                 return d3.format(",")(value.toFixed(1)) + "%";
            //             },
            //         },
            //     },
            //     bindto: "#aprobacion_ambito_vacancia",
            // });

            // var nse_aprobacion_vacancia = bb.generate({
            //     data: {
            //         columns: [
            //             ["data1", 81, 82, 78],
            //             ["data2", 10, 9, 8],
            //             ["data3", 7, 5, 4],
            //             // [
            //             //   "data4",
            //             //   ...filter_datita(nse_d, "aprueba").map(o => o.PERCENTAGE)
            //             // ],
            //             // [
            //             //   "data5",
            //             //   ...filter_datita(nse_e, "aprueba").map(o => o.PERCENTAGE)
            //             // ]
            //         ],
            //         type: "bubble", // for ESM specify as: bubble()
            //         names: {
            //             data1: "Que haya elecciones generales y se elija nuevo presidente y nuevos congresistas.",
            //             data2: "Que la vicepresidenta Dina Boluarte asuma la presidencia.",
            //             data3: "Que haya elecciones presidenciales y se mantengan los mismos congresistas.",
            //         },
            //         colors: {
            //             data1: "#7580d8",
            //             data2: "#60af64",
            //             data3: "#bb6336",
            //         },
            //         labels: false,
            //     },
            //     bubble: {
            //         maxR: 25,
            //     },
            //     axis: {
            //         x: {
            //             type: "category",
            //             categories: ["NSE A/B", "NSE C", "NSE D/E"],
            //         },
            //         y: {
            //             label: "Porcentaje (%)",
            //             max: 100,
            //         },
            //     },
            //     tooltip: {
            //         grouped: true,
            //         format: {
            //             value: function(value, ratio, id) {
            //                 return d3.format(",")(Math.round(value)) + "%";
            //             },
            //         },
            //     },
            //     legend: {
            //         position: "bottom", // bottom, right, inset
            //         padding: 10,
            //         inset: {
            //             anchor: "bottom-right", // top-left, top-right, bottom-left, bottom-right
            //             x: 20,
            //             y: -10,
            //         },
            //     },
            //     bindto: "#aprobacion_nse_vacancia",
            // });

            // var aprobacion_ideologia = bb.generate({
            //   data: {
            //     x: "x",
            //     columns: [
            //       ["x", "Centro", "Izquierda", "Derecha"],
            //       [
            //         "data1",
            //         ...filter_datita(
            //           aprobacion_ideologia_agosto,
            //           "agosto 2021"
            //         ).map(o => o.aprobacion)
            //       ],
            //       [
            //         "data2",
            //         ...filter_datita(
            //           aprobacion_ideologia_setiembre,
            //           "setiembre 2021"
            //         ).map(o => o.aprobacion)
            //       ],
            //       [
            //         "data3",
            //         ...filter_datita(
            //           aprobacion_ideologia_octubre,
            //           "octubre 2021"
            //         ).map(o => o.aprobacion)
            //       ]
            //     ],
            //     type: "radar", // for ESM specify as: radar()
            //     labels: false,
            //     names: {
            //       data1: "Agosto 2021",
            //       data2: "Setiembre 2021",
            //       data3: "Octubre 2021"
            //     }
            //   },
            //   radar: {
            //     axis: {
            //       max: 100
            //     },
            //     level: {
            //       depth: 1
            //     },
            //     direction: {
            //       clockwise: false
            //     }
            //   },
            //   tooltip: {
            //     format: {
            //       value: function(value, ratio, id) {
            //         return d3.format(",")(Math.round(value)) + "%";
            //       }
            //     }
            //   },
            //   bindto: "#aprobacion_ideologia"
            // });

            const aprobacion_mca = bb.generate({
                data: {
                    x: "x",
                    columns: [
                        [
                            "x",
                            "Set-21",
                            "Oct-21",
                            "Nov-21",
                            "Dic-21",
                            "Ene-22",
                            "Feb-22",
                            "Mar-22",
                            "Abr-22",
                            "May-22",
                        ],
                        [
                            "data1",
                            ...filter_datita(mca_nsnp, "ns/np").map((o) => o.PERCENTAGE),
                        ],
                        [
                            "data2",
                            ...filter_datita(mca_aprueba, "aprueba").map(
                                (o) => o.PERCENTAGE
                            ),
                        ],
                        [
                            "data3",
                            ...filter_datita(mca_desaprueba, "desaprueba").map(
                                (o) => o.PERCENTAGE
                            ),
                        ],
                    ],
                    types: {
                        data1: "line", // for ESM specify as: step()
                        data2: "line",
                        data3: "line",
                    },
                    names: {
                        data1: "No contesta",
                        data2: "Aprueba",
                        data3: "Desaprueba",
                    },
                    colors: {
                        data1: "#ffe48f",
                        data2: "#adcc76",
                        data3: "#de425b",
                    },
                    labels: false,
                    // labels :{
                    //   colors: "#FFF"
                    // }
                },
                axis: {
                    x: {
                        type: "category",
                    },
                },
                // axis: {
                //   x: {
                //     // type: "category",
                //     categories: [
                //       "Agosto",
                //       "Setiembre",
                //       "Octubre",
                //       "Noviembre",
                //       "Diciembre"
                //     ]
                //   }
                // },
                tooltip: {
                    format: {
                        value: function(value, ratio, id) {
                            return d3.format(",")(Math.round(value)) + "%";
                        },
                    },
                },
                bindto: "#aprobacion_mca",
            });

            // var corrupto_castillo = bb.generate({
            //     data: {
            //         columns: [
            //             ["data1", 39, 33, 21, 7],
            //             ["data2", 32, 40, 21, 7],
            //             ["data3", 20, 40, 32, 8],
            //         ],
            //         type: "bar", // for ESM specify as: bar()
            //         names: {
            //             data1: "Diciembre 2021 ",
            //             data2: "Marzo 2022 ",
            //             data3: "Mayo 2022 ",
            //         },
            //         colors: {
            //             data1: "#adcc76",
            //             data2: "#f7c856",
            //             data3: "#de425b",
            //         },
            //     },
            //     axis: {
            //         x: {
            //             type: "category",
            //             categories: [
            //                 "Menos corrupto",
            //                 "Igual de corrupto",
            //                 "Más corrupto",
            //                 "No contesta",
            //             ],
            //         },
            //     },
            //     bar: 10,
            //     tooltip: {
            //         format: {
            //             value: function(value, ratio, id) {
            //                 return d3.format(",")(Math.round(value)) + "%";
            //             },
            //         },
            //     },
            //     bindto: "#corrupto_castillo",
            // });

            // var vacancia_castillo = bb.generate({
            //     data: {
            //         columns: [
            //             ["data1", 43, 55, 2],
            //             ["data2", 51, 47, 2],
            //         ],
            //         type: "bar", // for ESM specify as: bar()
            //         names: {
            //             data1: "Noviembre 2021 ",
            //             data2: "Marzo 2022 ",
            //         },
            //         colors: {
            //             data1: "#adcc76",
            //             data2: "#f7c856",
            //         },
            //     },
            //     axis: {
            //         x: {
            //             type: "category",
            //             categories: ["Aprueba", "Desaprueba", "NS/NP"],
            //         },
            //     },
            //     bar: 10,
            //     tooltip: {
            //         format: {
            //             value: function(value, ratio, id) {
            //                 return d3.format(",")(Math.round(value)) + "%";
            //             },
            //         },
            //     },
            //     bindto: "#vacancia_castillo",
            // });

            // var despues_vacancia = bb.generate({
            //     data: {
            //         columns: [
            //             ["data1", 80, 9, 5, 6]
            //         ],
            //         type: "bar", // for ESM specify as: bar()
            //         names: {
            //             data1: "  ",
            //         },
            //         colors: {
            //             data1: "#e76c5d",
            //         },
            //     },
            //     axis: {
            //         x: {
            //             type: "category",
            //             categories: [
            //                 "Que haya elecciones y se elija un nuevo presidente y congresistas",
            //                 "Que la vicepresidenta Dina Boluarte asuma  la presidencia",
            //                 "Que haya elecciones presidenciales y que se mantengan los congresistas",
            //                 "NS/NP",
            //             ],
            //         },
            //     },
            //     bar: 10,
            //     tooltip: {
            //         format: {
            //             value: function(value, ratio, id) {
            //                 return d3.format(",")(Math.round(value)) + "%";
            //             },
            //         },
            //     },
            //     legend: {
            //         show: false,
            //     },
            //     padding: {
            //         bottom: 20,
            //         top: 0,
            //         left: 0,
            //         right: 0,
            //     },
            //     bindto: "#despues_vacancia",
            // });

            // var razones_castillo = bb.generate({
            //     data: {
            //         columns: [
            //             ["data1", 63, 33, 2, 2]
            //         ],
            //         type: "bar", // for ESM specify as: bar()
            //         names: {
            //             data1: "  ",
            //         },
            //         colors: {
            //             data1: "#e76c5d",
            //         },
            //     },
            //     axis: {
            //         x: {
            //             type: "category",
            //             categories: [
            //                 "Por su incapacidad para gobernar",
            //                 "Porque no lo dejan gobernar",
            //                 "Ambas razones",
            //                 "Otro",
            //             ],
            //         },
            //     },
            //     bar: 10,
            //     tooltip: {
            //         format: {
            //             value: function(value, ratio, id) {
            //                 return d3.format(",")(Math.round(value)) + "%";
            //             },
            //         },
            //     },
            //     legend: {
            //         show: false,
            //     },
            //     padding: {
            //         bottom: 20,
            //         top: 0,
            //         left: 0,
            //         right: 0,
            //     },
            //     bindto: "#razones_castillo",
            // });

            // var indulto_fujimori = bb.generate({
            //     data: {
            //         columns: [
            //             ["data1", 52, 43, 1, 4]
            //         ],
            //         type: "bar", // for ESM specify as: bar()
            //         names: {
            //             data1: "  ",
            //         },
            //         colors: {
            //             data1: "#e76c5d",
            //         },
            //     },
            //     axis: {
            //         x: {
            //             type: "category",
            //             categories: ["En contra", "A favor", "Me da igual", "NS/NP"],
            //         },
            //     },
            //     bar: 10,
            //     tooltip: {
            //         format: {
            //             value: function(value, ratio, id) {
            //                 return d3.format(",")(Math.round(value)) + "%";
            //             },
            //         },
            //     },
            //     legend: {
            //         show: false,
            //     },
            //     padding: {
            //         bottom: 20,
            //         top: 0,
            //         left: 0,
            //         right: 0,
            //     },
            //     bindto: "#indulto_fujimori",
            // });

            /*
      var enfrentamiento_castillo = bb.generate({
        data: {
          columns: [
            ["data1", 70, 12, 10, 6, 2],
            ["data2", 48, 20, 15, 15, 2]
          ],
          type: "bar", // for ESM specify as: bar()
          names: {
            data1: "Al país en general ",
            data2: "A usted personalmente "
          }
        },
        axis: {
          x: {
            type: "category",
            categories: ["Mucho", "Algo", "Poco", "Nada", "No contesta"]
          }
        },
        bar: {
          width: {
            ratio: 0.5
          }
        },
        tooltip: {
          format: {
            value: function(value, ratio, id) {
              return d3.format(",")(Math.round(value)) + "%";
            }
          }
        },
        bindto: "#enfrentamiento_castillo"
      }); */

            // var votacion_vacancia = bb.generate({
            //     data: {
            //         columns: [
            //             ["data1", 2],
            //             ["data2", 50],
            //             ["data3", 47],
            //         ],
            //         type: "donut", // for ESM specify as: donut()
            //         names: {
            //             data1: "No contesta",
            //             data2: "Aprueba",
            //             data3: "Desaprueba",
            //         },
            //         colors: {
            //             data1: "#ffe48f",
            //             data2: "#adcc76",
            //             data3: "#de425b",
            //         },
            //         onclick: function(d, i) {
            //             // console.log("onclick", d, i);
            //         },
            //         onover: function(d, i) {
            //             // console.log("onover", d, i);
            //         },
            //         onout: function(d, i) {
            //             // console.log("onout", d, i);
            //         },
            //     },
            //     donut: {
            //         title: "Vacancia Pedro Castillo",
            //     },
            //     tooltip: {
            //         format: {
            //             title: function(id) {
            //                 return id;
            //             },
            //             value: function(value, ratio, id) {
            //                 return d3.format(",")(value.toFixed(1)) + "%";
            //             },
            //         },
            //     },
            //     bindto: "#votacion_vacancia",
            // });

            // var defensa_castillo = bb.generate({
            //     data: {
            //         columns: [
            //             ["data1", 1],
            //             ["data2", 45],
            //             ["data3", 54],
            //         ],
            //         type: "gauge", // for ESM specify as: gauge()
            //         order: "asc",
            //         labels: {
            //             colors: {
            //                 data1: "#fff",
            //                 data2: "#fff",
            //                 data3: "#fff",
            //             },
            //         },
            //         names: {
            //             data1: "No contesta",
            //             data2: "Si",
            //             data3: "No",
            //         },
            //         colors: {
            //             data1: "#ffe48f",
            //             data2: "#adcc76",
            //             data3: "#de425b",
            //         },
            //         onclick: function(d, i) {
            //             // console.log("onclick", d, i);
            //         },
            //         onover: function(d, i) {
            //             // console.log("onover", d, i);
            //         },
            //         onout: function(d, i) {
            //             // console.log("onout", d, i);
            //         },
            //     },
            //     gauge: {
            //         max: 100,
            //         title: "Presidente Castillo en el congreso",
            //     },
            //     tooltip: {
            //         format: {
            //             title: function(id) {
            //                 return id;
            //             },
            //             value: function(value, ratio, id) {
            //                 return d3.format(",")(value.toFixed(1)) + "%";
            //             },
            //         },
            //     },
            //     bindto: "#defensa_castillo",
            // });
        });

        function centerDiv(that_element) {
            var element = document.querySelector(that_element);
            var position = element.getBoundingClientRect();

            // checking whether fully visible
            if (position.top >= 0 && position.bottom <= window.innerHeight) {
                //  set your counter to 1

                // (function(valor1, valor2) {
                console.log("entro");
                if (firstTime == 0) {
                    var format = d3.format(",d");

                    var valor1 = 43;
                    var valor2 = 31;

                    let number_1 = d3.select(".number_1");

                    let number_2 = d3.select(".number_2");

                    number_1
                        .transition()
                        .duration(8500)
                        .on("start", function repeat() {
                            d3.active(this)
                                .tween("text", function() {
                                    var that = d3.select(this),
                                        i = d3.interpolateNumber(
                                            that.text().replace(/,/g, ""),
                                            valor1
                                        );

                                    return function(t) {
                                        that.text(format(i(t)));
                                        // that2.text(format(i(t)));
                                    };
                                })
                                .transition()
                                // .delay(500)
                                .on("start", repeat);
                        });

                    number_2
                        .transition()
                        .duration(8000)
                        .on("start", function repeat() {
                            d3.active(this)
                                .tween("text", function() {
                                    var that = d3.select(this),
                                        i = d3.interpolateNumber(
                                            that.text().replace(/,/g, ""),
                                            valor2
                                        );

                                    return function(t) {
                                        that.text(format(i(t)));
                                        // that2.text(format(i(t)));
                                    };
                                })
                                .transition()
                                // .delay(500)
                                .on("start", repeat);
                        });
                }
                firstTime = 1;
                // })(43, 31);
            }

            // firstTime=1
            // checking for partial visibility
            // if (position.top < window.innerHeight && position.bottom >= 0) {
            // }
        }
    </script>
    <!-- <script src="script.js" defer></script> -->
</body>

</html>